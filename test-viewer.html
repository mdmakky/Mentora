<!DOCTYPE html>
<html>
<head>
    <title>Document Viewer Test</title>
</head>
<body>
    <h1>Document Viewer Test</h1>
    
    <h2>Available Documents:</h2>
    <div id="documents"></div>
    
    <h2>Test Document URLs:</h2>
    <div id="test-urls"></div>

    <script>
        // Test document API
        fetch('http://localhost:8000/api/reader/documents/')
        .then(response => response.json())
        .then(data => {
            const documents = data.documents || data;
            const docDiv = document.getElementById('documents');
            const urlDiv = document.getElementById('test-urls');
            
            documents.forEach(doc => {
                // Display document info
                const docElement = document.createElement('div');
                docElement.innerHTML = `
                    <p><strong>${doc.title}</strong> (ID: ${doc.id})</p>
                    <p>Pages: ${doc.total_pages}, Processed: ${doc.is_processed}</p>
                `;
                docDiv.appendChild(docElement);
                
                // Create test URL
                const urlElement = document.createElement('div');
                const fileUrl = `http://localhost:8000/api/reader/documents/${doc.id}/file/`;
                urlElement.innerHTML = `
                    <p><a href="${fileUrl}" target="_blank">View ${doc.title}</a></p>
                `;
                urlDiv.appendChild(urlElement);
            });
        })
        .catch(error => {
            console.error('Error:', error);
            document.getElementById('documents').innerHTML = '<p>Error loading documents</p>';
        });
    </script>
</body>
</html>
